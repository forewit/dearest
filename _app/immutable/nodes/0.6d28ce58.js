import{s as V,c as B,o as q,d as F,u as N,g as P,e as G,f as z,n as J}from"../chunks/scheduler.35f0b4e5.js";import{S as K,i as Q,g as v,s as L,x as W,h as y,f as d,c as C,j as T,k as g,l as m,y as S,a as D,t as b,b as M,d as p,z as X,A as Y,B as Z,C as x,D as U,p as A}from"../chunks/index.8012f2c6.js";import{a as $,b as E,d as O,c as H,g as ee,s as te,e as ae}from"../chunks/authStore.83e3c9ce.js";import{f as j}from"../chunks/index.50a917e9.js";function ne({url:c}){return{url:c.pathname}}const se=!0,fe=Object.freeze(Object.defineProperty({__proto__:null,load:ne,prerender:se},Symbol.toStringTag,{value:"Module"}));function I(c){let a,o,r,n;const f=c[6].default,i=F(f,c,c[5],null);return{c(){a=v("div"),i&&i.c()},l(t){a=y(t,"DIV",{});var e=T(a);i&&i.l(e),e.forEach(d)},m(t,e){D(t,a,e),i&&i.m(a,null),n=!0},p(t,e){i&&i.p&&(!n||e&32)&&N(i,f,t,t[5],n?G(f,t[5],e,null):P(t[5]),null)},i(t){n||(p(i,t),t&&z(()=>{n&&(r&&r.end(1),o=X(a,j,{duration:300,delay:300}),o.start())}),n=!0)},o(t){b(i,t),o&&o.invalidate(),t&&(r=Y(a,j,{duration:300})),n=!1},d(t){t&&d(a),i&&i.d(t),t&&r&&r.end()}}}function R(c){let a,o,r='<img src="/images/logout.svg" alt="logout"/>',n,f,i,t;return{c(){a=v("a"),o=v("button"),o.innerHTML=r,this.h()},l(e){a=y(e,"A",{href:!0});var s=T(a);o=y(s,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(o)!=="svelte-1yn5647"&&(o.innerHTML=r),s.forEach(d),this.h()},h(){g(o,"class","logout-btn button svelte-n0ojgf"),g(a,"href","/")},m(e,s){D(e,a,s),S(a,o),f=!0,i||(t=x(o,"click",ae.logout),i=!0)},i(e){f||(e&&z(()=>{f&&(n||(n=U(a,j,{duration:300},!0)),n.run(1))}),f=!0)},o(e){e&&(n||(n=U(a,j,{duration:300},!1)),n.run(0)),f=!1},d(e){e&&d(a),e&&n&&n.end(),i=!1,t()}}}function oe(c){let a,o,r,n,f=c[0].url,i,t,e=I(c),s=c[4].currentUser&&R();return{c(){a=v("meta"),o=L(),r=v("div"),n=v("div"),e.c(),i=L(),s&&s.c(),this.h()},l(u){const l=W("svelte-1xk05yi",document.head);a=y(l,"META",{name:!0,content:!0}),l.forEach(d),o=C(u),r=y(u,"DIV",{class:!0,style:!0});var k=T(r);n=y(k,"DIV",{class:!0});var _=T(n);e.l(_),i=C(_),s&&s.l(_),_.forEach(d),k.forEach(d),this.h()},h(){g(a,"name","viewport"),g(a,"content","width=device-width, user-scalable=0, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover"),g(n,"class","content svelte-n0ojgf"),g(r,"class","container svelte-n0ojgf"),m(r,"--notch-left",c[1]),m(r,"--notch-right",c[2]),m(r,"--notch-top",c[3])},m(u,l){S(document.head,a),D(u,o,l),D(u,r,l),S(r,n),e.m(n,null),S(n,i),s&&s.m(n,null),t=!0},p(u,[l]){l&1&&V(f,f=u[0].url)?(A(),b(e,1,1,J),M(),e=I(u),e.c(),p(e,1),e.m(n,i)):e.p(u,l),u[4].currentUser?s?l&16&&p(s,1):(s=R(),s.c(),p(s,1),s.m(n,null)):s&&(A(),b(s,1,1,()=>{s=null}),M()),(!t||l&2)&&m(r,"--notch-left",u[1]),(!t||l&4)&&m(r,"--notch-right",u[2]),(!t||l&8)&&m(r,"--notch-top",u[3])},i(u){t||(p(e),p(s),t=!0)},o(u){b(e),b(s),t=!1},d(u){u&&(d(o),d(r)),d(a),e.d(u),s&&s.d()}}}function re(c,a,o){let r;B(c,E,l=>o(4,r=l));let{$$slots:n={},$$scope:f}=a,{data:i}=a,t=0,e=0,s=0;function u(){o(1,t=screen.orientation.type=="landscape-primary"?1:0),o(2,e=screen.orientation.type=="landscape-secondary"?1:0),o(3,s=screen.orientation.type=="portrait-primary"?1:0)}return q(()=>{screen.orientation.onchange=u,u(),$.onAuthStateChanged(async l=>{if(!l){E.update(h=>({...h,isLoading:!1,currentUser:l}));return}const k=O(H,"users",l.uid),_=await ee(k);let w={text:""};if(_.exists())console.log("Fetching firestore user doc..."),w=_.data();else{console.log("Creating firestore user doc...");const h=O(H,"users",l.uid);await te(h,w,{merge:!0})}E.update(h=>({...h,isLoading:!1,currentUser:l,data:w}))})}),c.$$set=l=>{"data"in l&&o(0,i=l.data),"$$scope"in l&&o(5,f=l.$$scope)},[i,t,e,s,r,f,n]}class de extends K{constructor(a){super(),Q(this,a,re,oe,V,{data:0})}}export{de as component,fe as universal};
