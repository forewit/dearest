import{s as R,c as B,o as F,d as N,u as P,g as G,e as J,f as V,n as K}from"../chunks/scheduler.35f0b4e5.js";import{S as Q,i as W,g,s as C,x as X,h as y,f as d,c as M,j as T,k as v,l as m,y as S,a as D,t as b,b as U,d as p,z as q,A as z,B as Y,C as Z,p as A}from"../chunks/index.57cd87e4.js";import{a as x,b as L,d as O,c as j,g as $,s as ee,e as te}from"../chunks/authStore.83e3c9ce.js";import{f as w}from"../chunks/index.50a917e9.js";function ae({url:c}){return{url:c.pathname}}const se=!0,ce=Object.freeze(Object.defineProperty({__proto__:null,load:ae,prerender:se},Symbol.toStringTag,{value:"Module"}));function H(c){let a,r,l,i;const f=c[6].default,s=N(f,c,c[5],null);return{c(){a=g("div"),s&&s.c()},l(e){a=y(e,"DIV",{});var o=T(a);s&&s.l(o),o.forEach(d)},m(e,o){D(e,a,o),s&&s.m(a,null),i=!0},p(e,o){s&&s.p&&(!i||o&32)&&P(s,f,e,e[5],i?J(f,e[5],o,null):G(e[5]),null)},i(e){i||(p(s,e),e&&V(()=>{i&&(l&&l.end(1),r=q(a,w,{duration:300,delay:300}),r.start())}),i=!0)},o(e){b(s,e),r&&r.invalidate(),e&&(l=z(a,w,{duration:300})),i=!1},d(e){e&&d(a),s&&s.d(e),e&&l&&l.end()}}}function I(c){let a,r,l='<div class="logout-logo svelte-p5sdma"></div>',i,f,s,e,o;return{c(){a=g("a"),r=g("button"),r.innerHTML=l,this.h()},l(t){a=y(t,"A",{href:!0});var n=T(a);r=y(n,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(r)!=="svelte-1283q6g"&&(r.innerHTML=l),n.forEach(d),this.h()},h(){v(r,"class","logout-btn button svelte-p5sdma"),v(a,"href","/")},m(t,n){D(t,a,n),S(a,r),s=!0,e||(o=Z(r,"click",te.logout),e=!0)},i(t){s||(t&&V(()=>{s&&(f&&f.end(1),i=q(a,w,{duration:300,delay:300}),i.start())}),s=!0)},o(t){i&&i.invalidate(),t&&(f=z(a,w,{duration:300})),s=!1},d(t){t&&d(a),t&&f&&f.end(),e=!1,o()}}}function oe(c){let a,r,l,i,f=c[0].url,s,e,o=H(c),t=c[4].currentUser&&I();return{c(){a=g("meta"),r=C(),l=g("div"),i=g("div"),o.c(),s=C(),t&&t.c(),this.h()},l(n){const u=X("svelte-1xk05yi",document.head);a=y(u,"META",{name:!0,content:!0}),u.forEach(d),r=M(n),l=y(n,"DIV",{class:!0,style:!0});var k=T(l);i=y(k,"DIV",{class:!0});var _=T(i);o.l(_),s=M(_),t&&t.l(_),_.forEach(d),k.forEach(d),this.h()},h(){v(a,"name","viewport"),v(a,"content","width=device-width, user-scalable=0, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover"),v(i,"class","content svelte-p5sdma"),v(l,"class","container svelte-p5sdma"),m(l,"--notch-left",c[1]),m(l,"--notch-right",c[2]),m(l,"--notch-top",c[3])},m(n,u){S(document.head,a),D(n,r,u),D(n,l,u),S(l,i),o.m(i,null),S(i,s),t&&t.m(i,null),e=!0},p(n,[u]){u&1&&R(f,f=n[0].url)?(A(),b(o,1,1,K),U(),o=H(n),o.c(),p(o,1),o.m(i,s)):o.p(n,u),n[4].currentUser?t?u&16&&p(t,1):(t=I(),t.c(),p(t,1),t.m(i,null)):t&&(A(),b(t,1,1,()=>{t=null}),U()),(!e||u&2)&&m(l,"--notch-left",n[1]),(!e||u&4)&&m(l,"--notch-right",n[2]),(!e||u&8)&&m(l,"--notch-top",n[3])},i(n){e||(p(o),p(t),e=!0)},o(n){b(o),b(t),e=!1},d(n){n&&(d(r),d(l)),d(a),o.d(n),t&&t.d()}}}function ne(c,a,r){let l;B(c,L,u=>r(4,l=u));let{$$slots:i={},$$scope:f}=a,{data:s}=a,e=0,o=0,t=0;function n(){r(1,e=screen.orientation.type=="landscape-primary"?1:0),r(2,o=screen.orientation.type=="landscape-secondary"?1:0),r(3,t=screen.orientation.type=="portrait-primary"?1:0)}return F(()=>{screen.orientation.onchange=n,n(),x.onAuthStateChanged(async u=>{if(!u){L.update(h=>({...h,isLoading:!1,currentUser:u}));return}const k=O(j,"users",u.uid),_=await $(k);let E={text:""};if(_.exists())console.log("Fetching firestore user doc..."),E=_.data();else{console.log("Creating firestore user doc...");const h=O(j,"users",u.uid);await ee(h,E,{merge:!0})}L.update(h=>({...h,isLoading:!1,currentUser:u,data:E}))})}),c.$$set=u=>{"data"in u&&r(0,s=u.data),"$$scope"in u&&r(5,f=u.$$scope)},[s,e,o,t,l,f,i]}class fe extends Q{constructor(a){super(),W(this,a,ne,oe,R,{data:0})}}export{fe as component,ce as universal};
