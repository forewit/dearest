import{s as j,c as R,u as k,g as A,d as G,o as I}from"../chunks/scheduler.63274e7e.js";import{S as M,i as O,g,s as S,r as U,x as V,h as v,f,c as w,u as q,j as b,k as h,l as m,y as $,a as y,v as z,d as D,t as C,w as F}from"../chunks/index.a7311e4f.js";import{a as P,b as T,d as E,c as L,g as B,s as H}from"../chunks/authStore.c96964db.js";const J=!0,Z=Object.freeze(Object.defineProperty({__proto__:null,prerender:J},Symbol.toStringTag,{value:"Module"}));class K extends M{constructor(n){super(),O(this,n,null,null,j,{})}}function N(r){let n,l,i,d,s,c,o;i=new K({});const _=r[4].default,t=R(_,r,r[3],null);return{c(){n=g("meta"),l=S(),U(i.$$.fragment),d=S(),s=g("div"),c=g("div"),t&&t.c(),this.h()},l(e){const a=V("svelte-1xk05yi",document.head);n=v(a,"META",{name:!0,content:!0}),a.forEach(f),l=w(e),q(i.$$.fragment,e),d=w(e),s=v(e,"DIV",{class:!0,style:!0});var p=b(s);c=v(p,"DIV",{class:!0});var u=b(c);t&&t.l(u),u.forEach(f),p.forEach(f),this.h()},h(){h(n,"name","viewport"),h(n,"content","width=device-width, user-scalable=0, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover"),h(c,"class","content svelte-1iuwdlw"),h(s,"class","container svelte-1iuwdlw"),m(s,"--notch-left",r[0]),m(s,"--notch-right",r[1]),m(s,"--notch-top",r[2])},m(e,a){$(document.head,n),y(e,l,a),z(i,e,a),y(e,d,a),y(e,s,a),$(s,c),t&&t.m(c,null),o=!0},p(e,[a]){t&&t.p&&(!o||a&8)&&k(t,_,e,e[3],o?G(_,e[3],a,null):A(e[3]),null),(!o||a&1)&&m(s,"--notch-left",e[0]),(!o||a&2)&&m(s,"--notch-right",e[1]),(!o||a&4)&&m(s,"--notch-top",e[2])},i(e){o||(D(i.$$.fragment,e),D(t,e),o=!0)},o(e){C(i.$$.fragment,e),C(t,e),o=!1},d(e){e&&(f(l),f(d),f(s)),f(n),F(i,e),t&&t.d(e)}}}function Q(r,n,l){let{$$slots:i={},$$scope:d}=n,s=0,c=0,o=0;function _(){l(0,s=screen.orientation.type=="landscape-primary"?1:0),l(1,c=screen.orientation.type=="landscape-secondary"?1:0),l(2,o=screen.orientation.type=="portrait-primary"?1:0)}return I(()=>{screen.orientation.onchange=_,_(),P.onAuthStateChanged(async t=>{if(!t){T.update(u=>({...u,isLoading:!1,currentUser:t}));return}const e=E(L,"users",t.uid),a=await B(e);let p={text:""};if(a.exists())console.log("Fetching firestore user doc..."),p=a.data();else{console.log("Creating firestore user doc...");const u=E(L,"users",t.uid);await H(u,p,{merge:!0})}T.update(u=>({...u,isLoading:!1,currentUser:t,data:p}))})}),r.$$set=t=>{"$$scope"in t&&l(3,d=t.$$scope)},[s,c,o,d,i]}class x extends M{constructor(n){super(),O(this,n,Q,N,j,{})}}export{x as component,Z as universal};
