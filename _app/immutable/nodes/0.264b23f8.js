import{s as Y,c as P,o as $,d as ee,u as te,g as ne,e as oe,f as H,n as A}from"../chunks/scheduler.35f0b4e5.js";import{S as se,i as ie,g as T,s as S,x as ae,h as y,f as m,c as M,j as I,k,l as L,y as j,a as b,t as v,b as C,d as h,z as O,A as U,B as R,C as V,p as D}from"../chunks/index.57cd87e4.js";import{a as le,b as B,d as G,c as J,g as re,s as ue,e as fe}from"../chunks/authStore.be89f698.js";import{f as g}from"../chunks/index.50a917e9.js";import{g as E}from"../chunks/navigation.f4f647cc.js";import{p as ce}from"../chunks/stores.ccb95ae7.js";function de({url:f}){return{url:f.pathname}}const _e=!0,ye=Object.freeze(Object.defineProperty({__proto__:null,load:de,prerender:_e},Symbol.toStringTag,{value:"Module"}));function K(f){let e,c,n,i;const d=f[12].default,l=ee(d,f,f[11],null);return{c(){e=T("div"),l&&l.c()},l(s){e=y(s,"DIV",{});var t=I(e);l&&l.l(t),t.forEach(m)},m(s,t){b(s,e,t),l&&l.m(e,null),i=!0},p(s,t){l&&l.p&&(!i||t&2048)&&te(l,d,s,s[11],i?oe(d,s[11],t,null):ne(s[11]),null)},i(s){i||(h(l,s),s&&H(()=>{i&&(n&&n.end(1),c=O(e,g,{duration:300,delay:300}),c.start())}),i=!0)},o(s){v(l,s),c&&c.invalidate(),s&&(n=U(e,g,{duration:300})),i=!1},d(s){s&&m(e),l&&l.d(s),s&&n&&n.end()}}}function Q(f){let e,c,n,i='<div class="logout-logo svelte-17wugf6"></div>',d,l,s,t,u,o=f[4]<f[6].length-1&&W(f),a=f[4]>0&&X(f);return{c(){o&&o.c(),e=S(),a&&a.c(),c=S(),n=T("button"),n.innerHTML=i,this.h()},l(r){o&&o.l(r),e=M(r),a&&a.l(r),c=M(r),n=y(r,"BUTTON",{class:!0,"data-svelte-h":!0}),R(n)!=="svelte-1den51y"&&(n.innerHTML=i),this.h()},h(){k(n,"class","logout-btn button svelte-17wugf6")},m(r,_){o&&o.m(r,_),b(r,e,_),a&&a.m(r,_),b(r,c,_),b(r,n,_),s=!0,t||(u=V(n,"click",f[9]),t=!0)},p(r,_){r[4]<r[6].length-1?o?(o.p(r,_),_&16&&h(o,1)):(o=W(r),o.c(),h(o,1),o.m(e.parentNode,e)):o&&(D(),v(o,1,1,()=>{o=null}),C()),r[4]>0?a?(a.p(r,_),_&16&&h(a,1)):(a=X(r),a.c(),h(a,1),a.m(c.parentNode,c)):a&&(D(),v(a,1,1,()=>{a=null}),C())},i(r){s||(h(o),h(a),r&&H(()=>{s&&(l&&l.end(1),d=O(n,g,{duration:300}),d.start())}),s=!0)},o(r){v(o),v(a),d&&d.invalidate(),r&&(l=U(n,g,{duration:300})),s=!1},d(r){r&&(m(e),m(c),m(n)),o&&o.d(r),a&&a.d(r),r&&l&&l.end(),t=!1,u()}}}function W(f){let e,c='<div class="next-logo svelte-17wugf6"></div>',n,i,d,l,s;return{c(){e=T("button"),e.innerHTML=c,this.h()},l(t){e=y(t,"BUTTON",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1j322ot"&&(e.innerHTML=c),this.h()},h(){k(e,"class","next-btn button svelte-17wugf6")},m(t,u){b(t,e,u),d=!0,l||(s=V(e,"click",f[7]),l=!0)},p:A,i(t){d||(t&&H(()=>{d&&(i&&i.end(1),n=O(e,g,{duration:300}),n.start())}),d=!0)},o(t){n&&n.invalidate(),t&&(i=U(e,g,{duration:300})),d=!1},d(t){t&&m(e),t&&i&&i.end(),l=!1,s()}}}function X(f){let e,c='<div class="back-logo svelte-17wugf6"></div>',n,i,d,l,s;return{c(){e=T("button"),e.innerHTML=c,this.h()},l(t){e=y(t,"BUTTON",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-jqxr8b"&&(e.innerHTML=c),this.h()},h(){k(e,"class","back-btn button svelte-17wugf6")},m(t,u){b(t,e,u),d=!0,l||(s=V(e,"click",f[8]),l=!0)},p:A,i(t){d||(t&&H(()=>{d&&(i&&i.end(1),n=O(e,g,{duration:300}),n.start())}),d=!0)},o(t){n&&n.invalidate(),t&&(i=U(e,g,{duration:300})),d=!1},d(t){t&&m(e),t&&i&&i.end(),l=!1,s()}}}function pe(f){let e,c,n,i,d=f[0].url,l,s,t=K(f),u=f[5].currentUser&&Q(f);return{c(){e=T("meta"),c=S(),n=T("div"),i=T("div"),t.c(),l=S(),u&&u.c(),this.h()},l(o){const a=ae("svelte-1xk05yi",document.head);e=y(a,"META",{name:!0,content:!0}),a.forEach(m),c=M(o),n=y(o,"DIV",{class:!0,style:!0});var r=I(n);i=y(r,"DIV",{class:!0});var _=I(i);t.l(_),l=M(_),u&&u.l(_),_.forEach(m),r.forEach(m),this.h()},h(){k(e,"name","viewport"),k(e,"content","width=device-width, user-scalable=0, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover"),k(i,"class","content svelte-17wugf6"),k(n,"class","container svelte-17wugf6"),L(n,"--notch-left",f[1]),L(n,"--notch-right",f[2]),L(n,"--notch-top",f[3])},m(o,a){j(document.head,e),b(o,c,a),b(o,n,a),j(n,i),t.m(i,null),j(i,l),u&&u.m(i,null),s=!0},p(o,[a]){a&1&&Y(d,d=o[0].url)?(D(),v(t,1,1,A),C(),t=K(o),t.c(),h(t,1),t.m(i,l)):t.p(o,a),o[5].currentUser?u?(u.p(o,a),a&32&&h(u,1)):(u=Q(o),u.c(),h(u,1),u.m(i,null)):u&&(D(),v(u,1,1,()=>{u=null}),C()),(!s||a&2)&&L(n,"--notch-left",o[1]),(!s||a&4)&&L(n,"--notch-right",o[2]),(!s||a&8)&&L(n,"--notch-top",o[3])},i(o){s||(h(t),h(u),s=!0)},o(o){v(t),v(u),s=!1},d(o){o&&(m(c),m(n)),m(e),t.d(o),u&&u.d()}}}function me(f,e,c){let n,i,d;P(f,ce,p=>c(10,i=p)),P(f,B,p=>c(5,d=p));let{$$slots:l={},$$scope:s}=e,{data:t}=e,u=["/","/energy","/warmth","/success"];function o(){setTimeout(()=>E(u[n+1]),0)}function a(){setTimeout(()=>E(u[n-1]),0)}let r=0,_=0,q=0;function z(){c(1,r=screen.orientation.type=="landscape-primary"?1:0),c(2,_=screen.orientation.type=="landscape-secondary"?1:0),c(3,q=screen.orientation.type=="portrait-primary"?1:0)}$(()=>{screen.orientation.onchange=z,z(),le.onAuthStateChanged(async p=>{if(!p){B.update(w=>({...w,isLoading:!1,currentUser:p}));return}const x=G(J,"users",p.uid),F=await re(x);let N={text:""};if(F.exists())console.log("Fetching firestore user doc..."),N=F.data();else{console.log("Creating firestore user doc...");const w=G(J,"users",p.uid);await ue(w,N,{merge:!0})}B.update(w=>({...w,isLoading:!1,currentUser:p,data:N}))})});function Z(){fe.logout(),setTimeout(()=>E("/"),0)}return f.$$set=p=>{"data"in p&&c(0,t=p.data),"$$scope"in p&&c(11,s=p.$$scope)},f.$$.update=()=>{f.$$.dirty&1024&&c(4,n=u.indexOf(i.url.pathname))},[t,r,_,q,n,d,u,o,a,Z,i,s,l]}class we extends se{constructor(e){super(),ie(this,e,me,pe,Y,{data:0})}}export{we as component,ye as universal};
