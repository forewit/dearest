import{s as C,o as I,c as M,u as O,g as R,d as V,e as z,n as U}from"../chunks/scheduler.85ef5b45.js";import{S as q,i as F,g as m,s as P,x as B,h as v,f as d,c as G,j as g,k as p,l as _,y as w,a as b,t as k,b as H,d as S,z as J,A as K,p as N}from"../chunks/index.c6a6ecde.js";import{a as Q,b as E,d as T,c as L,g as W,s as X}from"../chunks/authStore.37cf8a2a.js";import{f as j}from"../chunks/index.88186261.js";function Y({url:i}){return{url:i.pathname}}const Z=!0,oe=Object.freeze(Object.defineProperty({__proto__:null,load:Y,prerender:Z},Symbol.toStringTag,{value:"Module"}));function A(i){let o,r,s,n;const u=i[5].default,a=M(u,i,i[4],null);return{c(){o=m("div"),a&&a.c()},l(e){o=v(e,"DIV",{});var t=g(o);a&&a.l(t),t.forEach(d)},m(e,t){b(e,o,t),a&&a.m(o,null),n=!0},p(e,t){a&&a.p&&(!n||t&16)&&O(a,u,e,e[4],n?V(u,e[4],t,null):R(e[4]),null)},i(e){n||(S(a,e),e&&z(()=>{n&&(s&&s.end(1),r=J(o,j,{duration:300,delay:300}),r.start())}),n=!0)},o(e){k(a,e),r&&r.invalidate(),e&&(s=K(o,j,{duration:300})),n=!1},d(e){e&&d(o),a&&a.d(e),e&&s&&s.end()}}}function $(i){let o,r,s,n,u=i[0].url,a,e=A(i);return{c(){o=m("meta"),r=P(),s=m("div"),n=m("div"),e.c(),this.h()},l(t){const l=B("svelte-1xk05yi",document.head);o=v(l,"META",{name:!0,content:!0}),l.forEach(d),r=G(t),s=v(t,"DIV",{class:!0,style:!0});var c=g(s);n=v(c,"DIV",{class:!0});var h=g(n);e.l(h),h.forEach(d),c.forEach(d),this.h()},h(){p(o,"name","viewport"),p(o,"content","width=device-width, user-scalable=0, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover"),p(n,"class","content svelte-tt5dk4"),p(s,"class","container svelte-tt5dk4"),_(s,"--notch-left",i[1]),_(s,"--notch-right",i[2]),_(s,"--notch-top",i[3])},m(t,l){w(document.head,o),b(t,r,l),b(t,s,l),w(s,n),e.m(n,null),a=!0},p(t,[l]){l&1&&C(u,u=t[0].url)?(N(),k(e,1,1,U),H(),e=A(t),e.c(),S(e,1),e.m(n,null)):e.p(t,l),(!a||l&2)&&_(s,"--notch-left",t[1]),(!a||l&4)&&_(s,"--notch-right",t[2]),(!a||l&8)&&_(s,"--notch-top",t[3])},i(t){a||(S(e),a=!0)},o(t){k(e),a=!1},d(t){t&&(d(r),d(s)),d(o),e.d(t)}}}function x(i,o,r){let{$$slots:s={},$$scope:n}=o,{data:u}=o,a=0,e=0,t=0;function l(){r(1,a=screen.orientation.type=="landscape-primary"?1:0),r(2,e=screen.orientation.type=="landscape-secondary"?1:0),r(3,t=screen.orientation.type=="portrait-primary"?1:0)}return I(()=>{screen.orientation.onchange=l,l(),Q.onAuthStateChanged(async c=>{if(!c){E.update(f=>({...f,isLoading:!1,currentUser:c}));return}const h=T(L,"users",c.uid),D=await W(h);let y={text:""};if(D.exists())console.log("Fetching firestore user doc..."),y=D.data();else{console.log("Creating firestore user doc...");const f=T(L,"users",c.uid);await X(f,y,{merge:!0})}E.update(f=>({...f,isLoading:!1,currentUser:c,data:y}))})}),i.$$set=c=>{"data"in c&&r(0,u=c.data),"$$scope"in c&&r(4,n=c.$$scope)},[u,a,e,t,n,s]}class ne extends q{constructor(o){super(),F(this,o,x,$,C,{data:0})}}export{ne as component,oe as universal};
