import{s as j,c as O,u as R,g as k,d as A,o as G}from"../chunks/scheduler.63274e7e.js";import{S as q,i as M,g,s as S,r as I,x as U,h as v,f as d,c as b,u as V,j as $,k as h,l as m,y as w,a as y,v as z,d as D,t as C,w as F}from"../chunks/index.a7311e4f.js";import{a as P,b as T,d as E,c as L,g as B,s as H}from"../chunks/authStore.c96964db.js";const J=!0,Z=Object.freeze(Object.defineProperty({__proto__:null,prerender:J},Symbol.toStringTag,{value:"Module"}));class K extends q{constructor(o){super(),M(this,o,null,null,j,{})}}function N(r){let o,l,c,f,s,i,n;c=new K({});const _=r[4].default,t=O(_,r,r[3],null);return{c(){o=g("meta"),l=S(),I(c.$$.fragment),f=S(),s=g("div"),i=g("div"),t&&t.c(),this.h()},l(e){const a=U("svelte-1xk05yi",document.head);o=v(a,"META",{name:!0,content:!0}),a.forEach(d),l=b(e),V(c.$$.fragment,e),f=b(e),s=v(e,"DIV",{class:!0,style:!0});var p=$(s);i=v(p,"DIV",{class:!0});var u=$(i);t&&t.l(u),u.forEach(d),p.forEach(d),this.h()},h(){h(o,"name","viewport"),h(o,"content","width=device-width, user-scalable=0, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover"),h(i,"class","content svelte-14o8fpq"),h(s,"class","container svelte-14o8fpq"),m(s,"--notch-left",r[0]),m(s,"--notch-right",r[1]),m(s,"--notch-top",r[2])},m(e,a){w(document.head,o),y(e,l,a),z(c,e,a),y(e,f,a),y(e,s,a),w(s,i),t&&t.m(i,null),n=!0},p(e,[a]){t&&t.p&&(!n||a&8)&&R(t,_,e,e[3],n?A(_,e[3],a,null):k(e[3]),null),(!n||a&1)&&m(s,"--notch-left",e[0]),(!n||a&2)&&m(s,"--notch-right",e[1]),(!n||a&4)&&m(s,"--notch-top",e[2])},i(e){n||(D(c.$$.fragment,e),D(t,e),n=!0)},o(e){C(c.$$.fragment,e),C(t,e),n=!1},d(e){e&&(d(l),d(f),d(s)),d(o),F(c,e),t&&t.d(e)}}}function Q(r,o,l){let{$$slots:c={},$$scope:f}=o,s=0,i=0,n=0;function _(){l(0,s=screen.orientation.type=="landscape-primary"?1:0),l(1,i=screen.orientation.type=="landscape-secondary"?1:0),l(2,n=screen.orientation.type=="portrait-primary"?1:0)}return G(()=>{screen.orientation.onchange=_,_(),P.onAuthStateChanged(async t=>{if(!t){T.update(u=>({...u,isLoading:!1,currentUser:t}));return}const e=E(L,"users",t.uid),a=await B(e);let p={text:""};if(a.exists())console.log("Fetching firestore user doc..."),p=a.data();else{console.log("Creating firestore user doc...");const u=E(L,"users",t.uid);await H(u,p,{merge:!0})}T.update(u=>({...u,isLoading:!1,currentUser:t,data:p}))})}),r.$$set=t=>{"$$scope"in t&&l(3,f=t.$$scope)},[s,i,n,f,c]}class x extends q{constructor(o){super(),M(this,o,Q,N,j,{})}}export{x as component,Z as universal};
