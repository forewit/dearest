import{s as Y,c as P,o as $,d as ee,u as te,g as ne,e as se,f as H,n as A}from"../chunks/scheduler.35f0b4e5.js";import{S as oe,i as ie,g as T,s as M,x as le,h as y,f as m,c as w,j as I,k,l as S,y as j,a as b,t as v,b as C,d as h,z as O,A as U,B as R,C as V,p as D}from"../chunks/index.57cd87e4.js";import{a as ae,b as B,d as G,c as J,g as re,s as ue,e as fe}from"../chunks/authStore.f65cf4eb.js";import{f as g}from"../chunks/index.50a917e9.js";import{g as E}from"../chunks/navigation.f818161b.js";import{p as ce}from"../chunks/stores.63fd5dfa.js";function de({url:f}){return{url:f.pathname}}const _e=!0,ye=Object.freeze(Object.defineProperty({__proto__:null,load:de,prerender:_e},Symbol.toStringTag,{value:"Module"}));function K(f){let e,c,n,i;const d=f[12].default,a=ee(d,f,f[11],null);return{c(){e=T("div"),a&&a.c()},l(o){e=y(o,"DIV",{});var t=I(e);a&&a.l(t),t.forEach(m)},m(o,t){b(o,e,t),a&&a.m(e,null),i=!0},p(o,t){a&&a.p&&(!i||t&2048)&&te(a,d,o,o[11],i?se(d,o[11],t,null):ne(o[11]),null)},i(o){i||(h(a,o),o&&H(()=>{i&&(n&&n.end(1),c=O(e,g,{duration:300,delay:300}),c.start())}),i=!0)},o(o){v(a,o),c&&c.invalidate(),o&&(n=U(e,g,{duration:300})),i=!1},d(o){o&&m(e),a&&a.d(o),o&&n&&n.end()}}}function Q(f){let e,c,n,i='<div class="logout-logo svelte-1slpe04"></div>',d,a,o,t,u,s=f[4]<f[6].length-1&&W(f),l=f[4]>0&&X(f);return{c(){s&&s.c(),e=M(),l&&l.c(),c=M(),n=T("button"),n.innerHTML=i,this.h()},l(r){s&&s.l(r),e=w(r),l&&l.l(r),c=w(r),n=y(r,"BUTTON",{class:!0,"data-svelte-h":!0}),R(n)!=="svelte-1den51y"&&(n.innerHTML=i),this.h()},h(){k(n,"class","logout-btn button svelte-1slpe04")},m(r,_){s&&s.m(r,_),b(r,e,_),l&&l.m(r,_),b(r,c,_),b(r,n,_),o=!0,t||(u=V(n,"click",f[9]),t=!0)},p(r,_){r[4]<r[6].length-1?s?(s.p(r,_),_&16&&h(s,1)):(s=W(r),s.c(),h(s,1),s.m(e.parentNode,e)):s&&(D(),v(s,1,1,()=>{s=null}),C()),r[4]>0?l?(l.p(r,_),_&16&&h(l,1)):(l=X(r),l.c(),h(l,1),l.m(c.parentNode,c)):l&&(D(),v(l,1,1,()=>{l=null}),C())},i(r){o||(h(s),h(l),r&&H(()=>{o&&(a&&a.end(1),d=O(n,g,{duration:300}),d.start())}),o=!0)},o(r){v(s),v(l),d&&d.invalidate(),r&&(a=U(n,g,{duration:300})),o=!1},d(r){r&&(m(e),m(c),m(n)),s&&s.d(r),l&&l.d(r),r&&a&&a.end(),t=!1,u()}}}function W(f){let e,c='<div class="next-logo svelte-1slpe04"></div>',n,i,d,a,o;return{c(){e=T("button"),e.innerHTML=c,this.h()},l(t){e=y(t,"BUTTON",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1j322ot"&&(e.innerHTML=c),this.h()},h(){k(e,"class","next-btn button svelte-1slpe04")},m(t,u){b(t,e,u),d=!0,a||(o=V(e,"click",f[7]),a=!0)},p:A,i(t){d||(t&&H(()=>{d&&(i&&i.end(1),n=O(e,g,{duration:300}),n.start())}),d=!0)},o(t){n&&n.invalidate(),t&&(i=U(e,g,{duration:300})),d=!1},d(t){t&&m(e),t&&i&&i.end(),a=!1,o()}}}function X(f){let e,c='<div class="back-logo svelte-1slpe04"></div>',n,i,d,a,o;return{c(){e=T("button"),e.innerHTML=c,this.h()},l(t){e=y(t,"BUTTON",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-jqxr8b"&&(e.innerHTML=c),this.h()},h(){k(e,"class","back-btn button svelte-1slpe04")},m(t,u){b(t,e,u),d=!0,a||(o=V(e,"click",f[8]),a=!0)},p:A,i(t){d||(t&&H(()=>{d&&(i&&i.end(1),n=O(e,g,{duration:300}),n.start())}),d=!0)},o(t){n&&n.invalidate(),t&&(i=U(e,g,{duration:300})),d=!1},d(t){t&&m(e),t&&i&&i.end(),a=!1,o()}}}function pe(f){let e,c,n,i,d=f[0].url,a,o,t=K(f),u=f[5].currentUser&&Q(f);return{c(){e=T("meta"),c=M(),n=T("div"),i=T("div"),t.c(),a=M(),u&&u.c(),this.h()},l(s){const l=le("svelte-1xk05yi",document.head);e=y(l,"META",{name:!0,content:!0}),l.forEach(m),c=w(s),n=y(s,"DIV",{class:!0,style:!0});var r=I(n);i=y(r,"DIV",{class:!0});var _=I(i);t.l(_),a=w(_),u&&u.l(_),_.forEach(m),r.forEach(m),this.h()},h(){k(e,"name","viewport"),k(e,"content","width=device-width, user-scalable=0, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover"),k(i,"class","content svelte-1slpe04"),k(n,"class","container svelte-1slpe04"),S(n,"--notch-left",f[1]),S(n,"--notch-right",f[2]),S(n,"--notch-top",f[3])},m(s,l){j(document.head,e),b(s,c,l),b(s,n,l),j(n,i),t.m(i,null),j(i,a),u&&u.m(i,null),o=!0},p(s,[l]){l&1&&Y(d,d=s[0].url)?(D(),v(t,1,1,A),C(),t=K(s),t.c(),h(t,1),t.m(i,a)):t.p(s,l),s[5].currentUser?u?(u.p(s,l),l&32&&h(u,1)):(u=Q(s),u.c(),h(u,1),u.m(i,null)):u&&(D(),v(u,1,1,()=>{u=null}),C()),(!o||l&2)&&S(n,"--notch-left",s[1]),(!o||l&4)&&S(n,"--notch-right",s[2]),(!o||l&8)&&S(n,"--notch-top",s[3])},i(s){o||(h(t),h(u),o=!0)},o(s){v(t),v(u),o=!1},d(s){s&&(m(c),m(n)),m(e),t.d(s),u&&u.d()}}}function me(f,e,c){let n,i,d;P(f,ce,p=>c(10,i=p)),P(f,B,p=>c(5,d=p));let{$$slots:a={},$$scope:o}=e,{data:t}=e,u=["/","/energy","/warmth","/success"];function s(){setTimeout(()=>E(u[n+1]),0)}function l(){setTimeout(()=>E(u[n-1]),0)}let r=0,_=0,q=0;function z(){c(1,r=screen.orientation.type=="landscape-primary"?1:0),c(2,_=screen.orientation.type=="landscape-secondary"?1:0),c(3,q=screen.orientation.type=="portrait-primary"?1:0)}$(()=>{screen.orientation.onchange=z,z(),ae.onAuthStateChanged(async p=>{if(!p){B.update(L=>({...L,isLoading:!1,currentUser:p}));return}const x=G(J,"users",p.uid),F=await re(x);let N={text:""};if(F.exists())console.log("Fetching firestore user doc..."),N=F.data();else{console.log("Creating firestore user doc...");const L=G(J,"users",p.uid);await ue(L,N,{merge:!0})}B.update(L=>({...L,isLoading:!1,currentUser:p,data:N}))})});function Z(){fe.logout(),setTimeout(()=>E("/"),0)}return f.$$set=p=>{"data"in p&&c(0,t=p.data),"$$scope"in p&&c(11,o=p.$$scope)},f.$$.update=()=>{f.$$.dirty&1024&&c(4,n=u.indexOf(i.url.pathname))},[t,r,_,q,n,d,u,s,l,Z,i,o,a]}class Le extends oe{constructor(e){super(),ie(this,e,me,pe,Y,{data:0})}}export{Le as component,ye as universal};
