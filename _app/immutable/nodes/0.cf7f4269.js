import{s as E,c as L,u as j,g as C,d as M,o as O}from"../chunks/scheduler.63274e7e.js";import{S as R,i as k,g,s as A,x as I,h as y,f as d,c as U,j as v,k as _,l as f,y as w,a as S,d as V,t as $}from"../chunks/index.a7311e4f.js";import{a as q,b,d as D,c as T,g as z,s as F}from"../chunks/authStore.c96964db.js";const P=!0,N=Object.freeze(Object.defineProperty({__proto__:null,prerender:P},Symbol.toStringTag,{value:"Module"}));function B(r){let n,i,a,l,o;const c=r[4].default,s=L(c,r,r[3],null);return{c(){n=g("meta"),i=A(),a=g("div"),l=g("div"),s&&s.c(),this.h()},l(e){const t=I("svelte-1xk05yi",document.head);n=y(t,"META",{name:!0,content:!0}),t.forEach(d),i=U(e),a=y(e,"DIV",{class:!0,style:!0});var p=v(a);l=y(p,"DIV",{class:!0});var h=v(l);s&&s.l(h),h.forEach(d),p.forEach(d),this.h()},h(){_(n,"name","viewport"),_(n,"content","width=device-width, user-scalable=0, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover"),_(l,"class","content svelte-1iuwdlw"),_(a,"class","container svelte-1iuwdlw"),f(a,"--notch-left",r[0]),f(a,"--notch-right",r[1]),f(a,"--notch-top",r[2])},m(e,t){w(document.head,n),S(e,i,t),S(e,a,t),w(a,l),s&&s.m(l,null),o=!0},p(e,[t]){s&&s.p&&(!o||t&8)&&j(s,c,e,e[3],o?M(c,e[3],t,null):C(e[3]),null),(!o||t&1)&&f(a,"--notch-left",e[0]),(!o||t&2)&&f(a,"--notch-right",e[1]),(!o||t&4)&&f(a,"--notch-top",e[2])},i(e){o||(V(s,e),o=!0)},o(e){$(s,e),o=!1},d(e){e&&(d(i),d(a)),d(n),s&&s.d(e)}}}function G(r,n,i){let{$$slots:a={},$$scope:l}=n,o=0,c=0,s=0;function e(){i(0,o=screen.orientation.type=="landscape-primary"?1:0),i(1,c=screen.orientation.type=="landscape-secondary"?1:0),i(2,s=screen.orientation.type=="portrait-primary"?1:0)}return O(()=>{screen.orientation.onchange=e,e(),q.onAuthStateChanged(async t=>{if(!t){b.update(u=>({...u,isLoading:!1,currentUser:t}));return}const p=D(T,"users",t.uid),h=await z(p);let m={text:""};if(h.exists())console.log("Fetching firestore user doc..."),m=h.data();else{console.log("Creating firestore user doc...");const u=D(T,"users",t.uid);await F(u,m,{merge:!0})}b.update(u=>({...u,isLoading:!1,currentUser:t,data:m}))})}),r.$$set=t=>{"$$scope"in t&&i(3,l=t.$$scope)},[o,c,s,l,a]}class Q extends R{constructor(n){super(),k(this,n,G,B,E,{})}}export{Q as component,N as universal};
