import{s as x,h as Q,n as S,r as G,f as W}from"../chunks/scheduler.85ef5b45.js";import{S as H,i as z,g as w,s as C,h as k,j as T,c as I,f as d,k as v,a as U,y,C as P,D as N,B as J,e as j,t as M,b as X,d as O,p as Y,r as Z,u as ee,v as te,w as se,m as q,n as L,o as A}from"../chunks/index.67ec67bb.js";import{e as K,b as F,d as le,c as ae,s as re}from"../chunks/authStore.37cf8a2a.js";import{j as ne}from"../chunks/singletons.02e398c7.js";function B(u){let e,l="Failed to login!";return{c(){e=w("p"),e.textContent=l,this.h()},l(t){e=k(t,"P",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-13uo4rd"&&(e.textContent=l),this.h()},h(){v(e,"class","error svelte-76w8fm")},m(t,s){U(t,e,s)},d(t){t&&d(e)}}}function ie(u){let e,l,t,s,r,i,f,o,_,a,n,g,m=u[2]&&B();return{c(){e=w("form"),l=w("img"),s=C(),r=w("input"),i=C(),f=w("input"),o=C(),m&&m.c(),_=C(),a=w("input"),this.h()},l(h){e=k(h,"FORM",{class:!0});var p=T(e);l=k(p,"IMG",{class:!0,src:!0,alt:!0}),s=I(p),r=k(p,"INPUT",{class:!0,type:!0,placeholder:!0}),i=I(p),f=k(p,"INPUT",{class:!0,type:!0,placeholder:!0}),o=I(p),m&&m.l(p),_=I(p),a=k(p,"INPUT",{type:!0,class:!0}),p.forEach(d),this.h()},h(){v(l,"class","logo svelte-76w8fm"),Q(l.src,t="./images/pen.svg")||v(l,"src",t),v(l,"alt","logo"),v(r,"class","email neu-inset svelte-76w8fm"),v(r,"type","email"),v(r,"placeholder","Email"),r.required=!0,v(f,"class","password neu-inset svelte-76w8fm"),v(f,"type","password"),v(f,"placeholder","Password"),f.required=!0,v(a,"type","submit"),a.value="Login",v(a,"class","btn svelte-76w8fm"),v(e,"class","container svelte-76w8fm")},m(h,p){U(h,e,p),y(e,l),y(e,s),y(e,r),P(r,u[0]),y(e,i),y(e,f),P(f,u[1]),y(e,o),m&&m.m(e,null),y(e,_),y(e,a),n||(g=[N(r,"input",u[4]),N(f,"input",u[5]),N(e,"submit",u[3])],n=!0)},p(h,[p]){p&1&&r.value!==h[0]&&P(r,h[0]),p&2&&f.value!==h[1]&&P(f,h[1]),h[2]?m||(m=B(),m.c(),m.m(e,_)):m&&(m.d(1),m=null)},i:S,o:S,d(h){h&&d(e),m&&m.d(),n=!1,G(g)}}}function ue(u,e,l){let t="",s="",r=!1;async function i(){try{l(2,r=!1),await K.login(t,s)}catch{console.log("Login failed!"),l(2,r=!0)}}function f(){t=this.value,l(0,t)}function o(){s=this.value,l(1,s)}return[t,s,r,i,f,o]}class oe extends H{constructor(e){super(),z(this,e,ue,ie,x,{})}}const ce=ne("after_navigate");function fe(u){let e,l,t;return l=new oe({}),{c(){e=w("div"),Z(l.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0});var r=T(e);ee(l.$$.fragment,r),r.forEach(d),this.h()},h(){v(e,"class","auth-container neu neu-animated-rise svelte-1y0xsgs")},m(s,r){U(s,e,r),te(l,e,null),t=!0},p:S,i(s){t||(O(l.$$.fragment,s),t=!0)},o(s){M(l.$$.fragment,s),t=!1},d(s){s&&d(e),se(l)}}}function pe(u){let e,l,t=u[0].email+"",s,r,i,f="Logout",o,_,a,n,g,m,h,p=u[1].text+"",E,$,R;return{c(){e=w("div"),l=q("Current User: "),s=q(t),r=C(),i=w("button"),i.textContent=f,o=C(),_=w("form"),a=w("input"),n=C(),g=w("input"),m=C(),h=w("p"),E=q(p),this.h()},l(c){e=k(c,"DIV",{});var b=T(e);l=L(b,"Current User: "),s=L(b,t),b.forEach(d),r=I(c),i=k(c,"BUTTON",{"data-svelte-h":!0}),J(i)!=="svelte-pm79qf"&&(i.textContent=f),o=I(c),_=k(c,"FORM",{});var D=T(_);a=k(D,"INPUT",{type:!0}),n=I(D),g=k(D,"INPUT",{type:!0}),D.forEach(d),m=I(c),h=k(c,"P",{});var V=T(h);E=L(V,p),V.forEach(d),this.h()},h(){v(a,"type","text"),v(g,"type","submit"),g.value="Save!"},m(c,b){U(c,e,b),y(e,l),y(e,s),U(c,r,b),U(c,i,b),U(c,o,b),U(c,_,b),y(_,a),P(a,u[2]),y(_,n),y(_,g),U(c,m,b),U(c,h,b),y(h,E),$||(R=[N(i,"click",K.logout),N(a,"input",u[5]),N(_,"submit",u[6])],$=!0)},p(c,b){b&1&&t!==(t=c[0].email+"")&&A(s,t),b&4&&a.value!==c[2]&&P(a,c[2]),b&2&&p!==(p=c[1].text+"")&&A(E,p)},i:S,o:S,d(c){c&&(d(e),d(r),d(i),d(o),d(_),d(m),d(h)),$=!1,G(R)}}}function _e(u){let e,l,t,s,r,i;const f=[pe,fe],o=[];function _(a,n){return a[3].currentUser?0:1}return t=_(u),s=o[t]=f[t](u),{c(){e=w("div"),l=C(),s.c(),r=j()},l(a){e=k(a,"DIV",{}),T(e).forEach(d),l=I(a),s.l(a),r=j()},m(a,n){U(a,e,n),U(a,l,n),o[t].m(a,n),U(a,r,n),i=!0},p(a,[n]){let g=t;t=_(a),t===g?o[t].p(a,n):(Y(),M(o[g],1,1,()=>{o[g]=null}),X(),s=o[t],s?s.p(a,n):(s=o[t]=f[t](a),s.c()),O(s,1),s.m(r.parentNode,r))},i(a){i||(O(s),i=!0)},o(a){M(s),i=!1},d(a){a&&(d(e),d(l),d(r)),o[t].d(a)}}}function me(u,e,l){let t;W(u,F,n=>l(3,t=n));let s,r,i="";async function f(){if(t.currentUser)try{const n=le(ae,"users",t.currentUser.uid);await re(n,r,{merge:!0}),console.log("Save successful!")}catch(n){console.log("There was an error saving data!",n)}}function o(n){F.update(g=>({...g,data:n})),f()}F.subscribe(n=>{n.currentUser&&l(0,s=n.currentUser),n.data&&l(1,r=n.data)}),ce(()=>{console.log("after navigate")});function _(){i=this.value,l(2,i)}return[s,r,i,t,o,_,()=>{o({text:i})}]}class ge extends H{constructor(e){super(),z(this,e,me,_e,x,{})}}export{ge as component};
