import{s as V,c as z,o as B,d as F,u as N,g as P,e as G,f as q,n as J}from"../chunks/scheduler.35f0b4e5.js";import{S as K,i as Q,g,s as C,x as W,h as b,f as d,c as M,j as T,k as v,l as p,y as S,a as D,t as y,b as U,d as m,z as X,A as Y,B as Z,C as x,D as A,p as O}from"../chunks/index.8012f2c6.js";import{a as $,b as L,d as j,c as H,g as ee,s as te,e as ae}from"../chunks/authStore.83e3c9ce.js";import{f as w}from"../chunks/index.50a917e9.js";function se({url:c}){return{url:c.pathname}}const ne=!0,fe=Object.freeze(Object.defineProperty({__proto__:null,load:se,prerender:ne},Symbol.toStringTag,{value:"Module"}));function I(c){let a,o,r,s;const f=c[6].default,i=F(f,c,c[5],null);return{c(){a=g("div"),i&&i.c()},l(t){a=b(t,"DIV",{});var e=T(a);i&&i.l(e),e.forEach(d)},m(t,e){D(t,a,e),i&&i.m(a,null),s=!0},p(t,e){i&&i.p&&(!s||e&32)&&N(i,f,t,t[5],s?G(f,t[5],e,null):P(t[5]),null)},i(t){s||(m(i,t),t&&q(()=>{s&&(r&&r.end(1),o=X(a,w,{duration:300,delay:300}),o.start())}),s=!0)},o(t){y(i,t),o&&o.invalidate(),t&&(r=Y(a,w,{duration:300})),s=!1},d(t){t&&d(a),i&&i.d(t),t&&r&&r.end()}}}function R(c){let a,o,r='<div class="logout-logo svelte-pti5hs"></div>',s,f,i,t;return{c(){a=g("a"),o=g("button"),o.innerHTML=r,this.h()},l(e){a=b(e,"A",{href:!0});var n=T(a);o=b(n,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(o)!=="svelte-1283q6g"&&(o.innerHTML=r),n.forEach(d),this.h()},h(){v(o,"class","logout-btn button svelte-pti5hs"),v(a,"href","/")},m(e,n){D(e,a,n),S(a,o),f=!0,i||(t=x(o,"click",ae.logout),i=!0)},i(e){f||(e&&q(()=>{f&&(s||(s=A(a,w,{duration:300},!0)),s.run(1))}),f=!0)},o(e){e&&(s||(s=A(a,w,{duration:300},!1)),s.run(0)),f=!1},d(e){e&&d(a),e&&s&&s.end(),i=!1,t()}}}function oe(c){let a,o,r,s,f=c[0].url,i,t,e=I(c),n=c[4].currentUser&&R();return{c(){a=g("meta"),o=C(),r=g("div"),s=g("div"),e.c(),i=C(),n&&n.c(),this.h()},l(u){const l=W("svelte-1xk05yi",document.head);a=b(l,"META",{name:!0,content:!0}),l.forEach(d),o=M(u),r=b(u,"DIV",{class:!0,style:!0});var k=T(r);s=b(k,"DIV",{class:!0});var _=T(s);e.l(_),i=M(_),n&&n.l(_),_.forEach(d),k.forEach(d),this.h()},h(){v(a,"name","viewport"),v(a,"content","width=device-width, user-scalable=0, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover"),v(s,"class","content svelte-pti5hs"),v(r,"class","container svelte-pti5hs"),p(r,"--notch-left",c[1]),p(r,"--notch-right",c[2]),p(r,"--notch-top",c[3])},m(u,l){S(document.head,a),D(u,o,l),D(u,r,l),S(r,s),e.m(s,null),S(s,i),n&&n.m(s,null),t=!0},p(u,[l]){l&1&&V(f,f=u[0].url)?(O(),y(e,1,1,J),U(),e=I(u),e.c(),m(e,1),e.m(s,i)):e.p(u,l),u[4].currentUser?n?l&16&&m(n,1):(n=R(),n.c(),m(n,1),n.m(s,null)):n&&(O(),y(n,1,1,()=>{n=null}),U()),(!t||l&2)&&p(r,"--notch-left",u[1]),(!t||l&4)&&p(r,"--notch-right",u[2]),(!t||l&8)&&p(r,"--notch-top",u[3])},i(u){t||(m(e),m(n),t=!0)},o(u){y(e),y(n),t=!1},d(u){u&&(d(o),d(r)),d(a),e.d(u),n&&n.d()}}}function re(c,a,o){let r;z(c,L,l=>o(4,r=l));let{$$slots:s={},$$scope:f}=a,{data:i}=a,t=0,e=0,n=0;function u(){o(1,t=screen.orientation.type=="landscape-primary"?1:0),o(2,e=screen.orientation.type=="landscape-secondary"?1:0),o(3,n=screen.orientation.type=="portrait-primary"?1:0)}return B(()=>{screen.orientation.onchange=u,u(),$.onAuthStateChanged(async l=>{if(!l){L.update(h=>({...h,isLoading:!1,currentUser:l}));return}const k=j(H,"users",l.uid),_=await ee(k);let E={text:""};if(_.exists())console.log("Fetching firestore user doc..."),E=_.data();else{console.log("Creating firestore user doc...");const h=j(H,"users",l.uid);await te(h,E,{merge:!0})}L.update(h=>({...h,isLoading:!1,currentUser:l,data:E}))})}),c.$$set=l=>{"data"in l&&o(0,i=l.data),"$$scope"in l&&o(5,f=l.$$scope)},[i,t,e,n,r,f,s]}class de extends K{constructor(a){super(),Q(this,a,re,oe,V,{data:0})}}export{de as component,fe as universal};
